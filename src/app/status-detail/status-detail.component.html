<mat-sidenav-container class="example-container" role="status"
  [hasBackdrop]="mobileQuery.matches">
  <mat-sidenav class="status-detail-sidenav" #sidenav 
    [mode]="mobileQuery.matches ? 'over' : 'side'"
    opened fixedInViewport="true"
    [fixedTopGap]="mobileQuery.matches ? '90' : '50'">
    <mat-nav-list role="navigation">
      <a mat-list-item [routerLink]="['/status-details']"
         [queryParams]="{ target: site.target, target_type: site.target_type, title: site.title }"
         *ngFor=" let site of siteList"
         routerLinkActive="active-link"
         class="title-font">{{site.title}}
      </a>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="row justify-content-center no-gutters">
      <div class="col">
        <div class="current-status-section mb-2">
          <div id= "topView" 
            class="row  justify-content-center justify-content-md-end mb-1 no-gutters">
            <div class="col-2 d-block d-md-none">
              <button mat-icon-button aria-label="open close" (click)="sidenav.toggle()">
                <fa-icon [icon]= "barsIcon"></fa-icon>
              </button>
            </div>
            <div class="col-10 col-md-6 col-xl-3 m-md-2 mt-1">
              <div class="text-center text-md-right">
                <mat-button-toggle-group #timeFilter
                  appearance="legacy"
                  name="timeFilter" aria-label="timeFilter"
                  (change)= onChangeTime($event)>
                  <mat-button-toggle value="_last24hrs" checked>24Hrs</mat-button-toggle>
                  <mat-button-toggle value="_last7days">7Days</mat-button-toggle>
                  <mat-button-toggle value="_last30days">30Days</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
            <div class="col-6 col-md-4 col-xl-3 m-sm-2 m-1">
              <select class="custom-select custom-select-sm" [(ngModel)]= "selectedAgent"  data-style="btn-new"
                (ngModelChange) = "selectTheAgent(selectedAgent)">
                <option *ngFor="let agent of agentList" [value]="agent">{{agent}}</option>
              </select>
            </div>
          </div>
    
          <div id="div1" class="kbits-section">
            <span>{{title}}</span>
            <span>
              <span *ngIf="!fetchingData" class="glyphicon" [ngClass]="{'bg-light-green': statusDetails.status == 'green',
              'bg-pink-red': statusDetails.status == 'red', 'bg-orange': statusDetails.status == 'amber'}">
                  <fa-icon *ngIf="statusDetails.status == 'green' || statusDetails.status == 'amber'" [icon]="up" size="1x"></fa-icon>
                  <fa-icon *ngIf="statusDetails.status == 'red'" [icon]="down" size="1x"></fa-icon>
              </span>
              <span *ngIf="fetchingData" class="glyphicon">
                <div class="spinner-grow bg-dark" role="status" >
                  <span class="sr-only">Loading...</span>
                </div>
              </span>
            </span>
            <p class="mb-2 text-truncate target-link-size"><a [href] ="target" target="_blank" class="mb-2 text-truncate target-link-size">{{target}}</a></p>
            <div class="row no-gutters" *ngIf="!fetchingData">
              <div class="col">
                <app-chart [data] = "chartDataObj"></app-chart>
              </div>
            </div>
          </div>
        </div>
    
        <div class="latest-events" *ngIf="!fetchingData">
          <p *ngIf="errorList" class="latest-title text-center">Latest Events<span pull="right"> (Total: {{errorList.length}})</span></p>
          <ul *ngIf=" errorList && errorList.length == 0" class="news-demo-down-auto" style="overflow-y: hidden; height: 80px;">
            <li style="" class="news-item">No Event found</li>
          </ul>
          <ul *ngIf="errorList && errorList.length > 0" class="news-demo-down-auto" style="height: 90px;">
            <div class="event-scoll">
              <li class="mr-3" *ngFor= "let error of errorList">{{error}}<fa-icon class="red_arrow" pull="right" [icon]="download" size="1x"></fa-icon>
              </li>
            </div>
          </ul>
        </div>
      </div>
    </div>
    <div *ngIf="fetchingData" class="row no-gutters justify-content-center" style="min-height:75vh">
      <div class="col align-self-center">
        <app-spinner></app-spinner>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
